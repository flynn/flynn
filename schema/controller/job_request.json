{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "https://flynn.io/schema/controller/job_request#",
  "title": "Job Request",
  "description": "A job request describes a desired process configuration.",
  "sortIndex": 5,
  "type": "object",
  "required": ["app", "release"],
  "additionalProperties": false,
  "properties": {
    "id": {
      "$ref": "/schema/controller/common#/definitions/id"
    },
    "job": {
      "$ref": "/schema/controller/common#/definitions/id"
    },
    "app": {
      "$ref": "/schema/controller/common#/definitions/id"
    },
    "release": {
      "$ref": "/schema/controller/common#/definitions/id"
    },
    "artifacts": {
      "type": "array",
      "items": {
        "$ref": "/schema/controller/common#/definitions/id"
      }
    },
    "state": {
      "type": "string",
      "enum": ["pending", "starting", "running", "succeeded", "failed"]
    },
    "config": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "description": "job type",
          "type": "string"
        },
        "tags": {
          "description": "job tags",
          "type": "object"
        },
        "release_env": {
          "description": "include the release environment",
          "type": "boolean"
        },
        "cmd": {
          "$ref": "/schema/controller/common#/definitions/cmd"
        },
        "entrypoint": {
          "$ref": "/schema/controller/common#/definitions/entrypoint"
        },
        "env": {
          "$ref": "/schema/controller/common#/definitions/env"
        },
        "meta": {
          "$ref": "/schema/controller/common#/definitions/meta"
        },
        "tty": {
          "description": "initialize a tty session",
          "type": "boolean"
        },
        "tty_columns": {
          "description": "number of columns in tty",
          "type": "integer"
        },
        "tty_lines": {
          "description": "number of lines/rows in tty",
          "type": "integer"
        },
        "disable_log": {
          "description": "don't copy stdout/stdin to log stream",
          "type": "boolean"
        },
        "resources": {
          "$ref": "/schema/controller/common#/definitions/resources"
        },
        "attach": {
          "description": "only start the job once attached",
          "type": "boolean"
        },
        "data": {
          "description": "attach a data volume to the job",
          "type": "boolean"
        }
      }
    },
    "error": {
      "description": "host error if job failed to start",
      "type": "string"
    },
    "created_at": {
      "$ref": "/schema/controller/common#/definitions/created_at"
    }
  }
}
